def validar_nome(): # essa é a função para validar o nome, ela não precisa de parametros
    while True:
        nome = input("Digite o nome do aluno, por favor: ").strip().title()
        if nome != "": # ele não permite que hajá espaços vazios na entrada
           return nome  # ele me da um retorno da função, que eu irei precisas em outras partes do código
        else:
            print("O nome está inválido. Por favor, digite um nome válido.")
    
def validar_idade():
    while True:
        idade = input("Digite a idade do aluno, por favor: ")
        if idade.isdigit() and int(idade) > 0:
            idade = int(idade)
            return idade
        else:
            print("A idade do aluno está inválida. Por favor digite uma idade, válida")

def validar_nota():
    while True:
        try:
            nota = float(input("Digite a nota do aluno, por favor: "))
            if 0 <= nota <= 10:
                return nota
            else:
                print("A nota está inválida. Por favor, digite uma nota válida.")
        except ValueError:
            print("A entrada está inválida. Por favor, digite uma entrada válida.")

def cadastrar_alunos():
    nome = validar_nome()
    idade = validar_idade()
    nota = validar_nota()
    print("O nome, a idade e a nota do aluno foram cadastrada com sucesso!")
    return {"Nome": nome,"Idade": idade, "Nota": nota}

    
def mostrar_lista(lis_alunos):
    print("Lista atual de alunos:")
    for l in lis_alunos:
        print(f"O aluno {l['Nome']} tem {l['Idade']} anos e ficou com nota {l['Nota']:.1f}")
        
def calcular_media(lis_alunos):   
    total_notas = sum(l['Nota'] for l in lis_alunos)
    media = total_notas / len(lis_alunos)
    print(f"\n Cadastro finalizado. A média da turma foi: {media:.2f}")
                
# Parte principal do código

lis_alunos = []       

while True:
    aluno = cadastrar_alunos()
    lis_alunos.append(aluno)
    mostrar_lista(lis_alunos)

    while True:
        resposta = input("Você deseja cadastrar outro aluno? (S/N): ").strip().upper()
        if resposta == "S":
            break
        elif resposta == "N":
            print("\n Encerrando cadastro.")
            mostrar_lista(lis_alunos)
            calcular_media(lis_alunos)
            exit()
        else:
            print("Resposta inválida. Por favor, digite S para e N para não.")
